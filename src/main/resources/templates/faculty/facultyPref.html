<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<head>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	
	<th:block th:include="fragments/fac_header.html :: headerfiles"></th:block>
	
	<link rel="stylesheet" th:href="@{/css/faculty/fac_pref.css}">
	<link rel="stylesheet" th:href="@{/css/register.css}">
	<title>Faculty Preferences</title>
	
	<script>
		$(document).ready(function(){
		    $("#p1").click(function(){
		        $("#f1").show();
		        $("#f2").hide();
		        
		    });
		});
		
		function selectYear()
		{
			$.ajax({
		        type: "GET",
		        contentType: "application/json",
		        url: '/u/admin/getStudPrefDetailsTable_async',
		        success: function (data) {
	               console.log(data);
	               if ($(data).find('alert').length) {
	            	   $('#messageDiv').html('');
	                   $('#messageDiv').html(data);                   
	               }
	               else{
	            	   $('#studPrefTable').html('');
	                   $('#studPrefTable').html(data);
	                   
	              	 }
	               }
			});
		}
		
		$(document).ready(function(){
		    $("#f1").submit(function(){
		        $("#f2").show();
		        return false;
		    });
		});
		
		function showPref(){
            var pref = document.getElementById("pref").value;
            c1.innerHTML= pref;
        }
		
		$(document).ready(function(){
			$('#f2').submit(function () {
				return false;
			});
		});
	</script>
	
</head>

<div th:replace="fragments/fac_header :: header"></div>

<!-- script to turn nav link active -->
<script type="text/javascript">
	var navBar = document.getElementById("nav-bar");
	var current = navBar.getElementsByClassName("active");
    // If there's any other active nav, make it inactive
    if (current.length > 0) { 
      current[0].className = current[0].className.replace(" active", "");
    }
	//set current page nav as active
	document.getElementById("cpref-nav").className+=" active";		
</script>


<body>

<div class="sidebar">
  <table>
  	<tr>
  		<td colspan=4 align=center>
  			<h5>Give Preferences</h5>
  		</td>
  	</tr>
  	<tr>
  		<td>
  			<h6>1</h6>
  		</td>
  		<td style="width:250px">
  			<h6 id="c1"></h6>
  		</td>
  		<td>
			<button class="choose" id="p1">Choose</button>			
  		</td>
  		<td>
			<button class="clear">Clear</button>			
  		</td>
  	</tr>
  	
  	<tr>
  		<td>
  			<h6>2</h6>
  		</td>
  		<td>
  			<h6 id="c2"></h6>
  		</td>
  		<td>
  			<button class="choose" id="p2">Choose</button>	
  		</td>
  		<td>
			<button class="clear">Clear</button>			
  		</td>
  	</tr>
  	
  	<tr>
  		<td>
  			<h6>3</h6>
  		</td>
  		<td>
  			<h6 id="c3"></h6>
  		</td>
  		<td>
  			<button class="choose" id="p3">Choose</button>	
  		</td>
  		<td>
			<button class="clear">Clear</button>			
  		</td>
  	</tr>
  	
  	<tr>
  		<td>
  			<h6>4</h6>
  		</td>
  		<td>
  			<h6 id="c4"></h6>
  		</td>
  		<td>
  			<button class="choose" id="p4">Choose</button>	
  		</td>
  		<td>
			<button class="clear">Clear</button>			
  		</td>
  	</tr>
  	
  	<tr>
  		<td>
  			<h6>5</h6>
  		</td>
  		<td>
  			<h6 id="c5"></h6>
  		</td>
  		<td>
  			<button class="choose" id="p5">Choose</button>	
  		</td>
  		<td>
			<button class="clear">Clear</button>			
  		</td>
  	</tr>
  	
  	<tr>
  		<td>
  			<h6>6</h6>
  		</td>
  		<td>
  			<h6 id="c6"></h6>
  		</td>
  		<td>
  			<button class="choose" id="p6">Choose</button>	
  		</td>
  		<td>
			<button class="clear">Clear</button>			
  		</td>
  	</tr>
  	
  	<tr>
		<td colspan=4 align=center>
       		<button type="submit" id="submit" class="btn btn-primary btn-block"  style="width:150px; background-color: #2B7526;"> Submit  </button>
    	</td> 	  
	</tr>
  </table>
</div>

<div class="content">
  <div class="card bg-light">
  <article class="card-body mx-auto">
	<form th:action="@{/u/faculty/getFacultyPrefs}"  role="form" method="GET" id="f1">
	<h4 class="card-title mt-3 text-center">Select Year</h4>
	<table>
		<tr>
			<td>
			    Select Year
			</td>
			<td>
				<select class="form-control" th:name="elective_id" th:id="elective_id" onchange="if(this.value!='none') { selectYear('tableForm'); } else $('#f2').hide();" required>
					<option th:value="none" style="color:#8F8B87" selected >Select Year</option>
					<option value="SE" style="color:#000">SE</option>
					<option value="TE" style="color:#000">TE</option>
					<option value="BE" style="color:#000">BE</option>
				</select>	
			</td>
		</tr>
		
		<tr>
			<td colspan=2 align=center>
				<div class="form-group">
		        	<button type="submit" id="submit1" class="btn btn-primary btn-block" style="width:150px"> Get Choices  </button>
		    	</div> <!-- form-group// -->  
			</td>
		</tr>
	</table>
	</form>
</article>	
<div class="row text-center mx-auto">
	<div class="alert alert-success" role="alert" th:if="${msg}" th:utext="${msg}"></div>
	<div class="alert alert-danger" role="alert" th:if="${err_msg}" th:utext="${err_msg}"></div>
</div>

<article class="card-body mx-auto" th:fragment="selectPreferenceFragment">

    <form role="form" method="GET" id="f2"> 
    <table>
    	<tr>
    		<td>
    			Select Course
    		</td>
    		<td>
    			<select class="form-control" th:name="course1" th:id="pref">
					<option th:value="Preference_1" style="color:#8F8B87" selected>Select Course</option>
					
				</select>
    		</td>
    	</tr>
    	
    	<tr>
    		<td>
    			Number of times course taught
    		</td>
    		<td>
				<input id="courseExp"  name="courseExp" class="form-control" placeholder="Course Exp" type="number" min="0" required autofocus/>
    		</td>
    	</tr>
    	
    	<tr>
    		<td>
    			Pre1 times
    		</td>
    		<td>
    			<input id="prereq1Exp"  name="prereq1Exp" class="form-control" placeholder="Prerequisite 1 Exp" type="number" min="0" required autofocus/>
    		</td>
    	</tr>
    	
    	<tr>
    		<td>
    			Pre2 times
    		</td>
    		<td>
    			<input id="prereq2Exp"  name="prereq2Exp" class="form-control" placeholder="Prerequisite 2 Exp" type="number" min="0" required autofocus/>
    		</td>
    	</tr>
    	
    	<tr>
			<td colspan=2 align=center>
				<div class="form-group">
		        	<button type="submit" id="submit2" class="btn btn-primary btn-block" onclick="showPref()" style="width:165px"> Select Preference  </button>
		    	</div> <!-- form-group// -->  
			</td>
		</tr>
    </table>
	</form>
</article>

<div class="row text-center mx-auto">
	<div class="alert alert-success" role="alert" th:if="${msg1}" th:utext="${msg1}"></div>
</div>  
</div>
</div>

</body>
</html>
